<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RPG: rpg/source/texture.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RPG
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_71609f2fbdb19c7b5534f4fbfdad2c7d.html">rpg</a></li><li class="navelem"><a class="el" href="dir_33c2174d2b15f2fabc65ef15d3d9572c.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">texture.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="texture_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef TEXTURE_CPP</span></div><div class="line"><a name="l00002"></a><span class="lineno"><a class="line" href="texture_8cpp.html#a1dc742c98e5edfd4dbe4b4bebd857ac1">    2</a></span>&#160;<span class="preprocessor">#define TEXTURE_CPP</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;./../header/rpg_definitions.hpp&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;./../header/debug.hpp&quot;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;./../header/texture.hpp&quot;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="classtexture.html#a7b39c01f880020998232047fb25bc2cb">    8</a></span>&#160;<a class="code" href="classtexture.html#a67c03ae3cb8184199ab3127ce0f610c0">texture::texture</a>(SDL_Renderer* renner){</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    this-&gt;renner = renner;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 5; i++){this-&gt;textureVector.push_back(<span class="keyword">nullptr</span>);} <span class="comment">// 0: map, 1: player, 2: npcs, 3: objects, 4: ui</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;}</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="classtexture.html#ad5a0bbb1b219b176d7f7ba0cc4889479">   13</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classtexture.html#ad5a0bbb1b219b176d7f7ba0cc4889479">texture::renderTexture</a>(<span class="keywordtype">int</span> textureID, uint8_t kindOfTexture, SDL_Rect dst, <span class="keywordtype">int</span> hight, <span class="keywordtype">int</span> width){</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <span class="comment">//this will ckeck if the texture file is loaded. if not it will load it</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordflow">if</span>(this-&gt;textureVector[kindOfTexture] == <span class="keyword">nullptr</span>){</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        this-&gt;textureVector[kindOfTexture] = SDL_CreateTextureFromSurface(this-&gt;renner, IMG_Load(this-&gt;filepaths[kindOfTexture].c_str()));</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    }</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keywordtype">int</span> w, h;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    SDL_QueryTexture(this-&gt;textureVector[kindOfTexture], NULL, NULL, &amp;w, &amp;h);</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="comment">//the textures in the texture files are arranged 2 dimensional, but you only use 1 number the acces all of them. because of that the following lines will determine the position in the picture form the textureID</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    this-&gt;rectangle.x = (textureID % (w/width))*width;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    this-&gt;rectangle.y = ((textureID*width)/(w))*hight;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="debug_8hpp.html#a5852b5e64b4795d4994b9c2c8bb68874">DEB_MSG_3</a>(<a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(this-&gt;rectangle.y/hight) + <span class="stringliteral">&quot; &quot;</span> + <a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(this-&gt;rectangle.x/width))</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="debug_8hpp.html#a5852b5e64b4795d4994b9c2c8bb68874">DEB_MSG_3</a>(<a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(textureID) + <span class="stringliteral">&quot;/&quot;</span> + <a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(w) + <span class="stringliteral">&quot;*&quot;</span> + <a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(hight))</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">//this will also render the payer. Sadly the player is bigger than the tiles, and the ui and other stuff will be bigger to. because of that you need the hight and width of a texture in the given file</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    this-&gt;rectangle.h = hight;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    this-&gt;rectangle.w = width;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="debug_8hpp.html#a5852b5e64b4795d4994b9c2c8bb68874">DEB_MSG_3</a>(<span class="stringliteral">&quot;loading at x: &quot;</span> + <a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(this-&gt;rectangle.x) + <span class="stringliteral">&quot; y: &quot;</span> + <a class="code" href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a>(this-&gt;rectangle.y))</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    SDL_RenderCopy(this-&gt;renner, this-&gt;textureVector[kindOfTexture], &amp;this-&gt;rectangle, &amp;dst);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="classtexture.html#aff3c0a060981e8606ac39b761de56478">   35</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classtexture.html#aff3c0a060981e8606ac39b761de56478">texture::changeFilePath</a>(uint8_t kindOfTexture, std::string newPath){</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">//here the filename (oddly named newPath) will be added to the path of the texture folder</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    this-&gt;filepaths[kindOfTexture] = <span class="stringliteral">&quot;./resources/&quot;</span> + newPath;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    </div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">//this will reset the texture so the new one will be loaded the next time you need it</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    this-&gt;textureVector[kindOfTexture] = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classtexture.html#a5b9a995078ce974944cf7f45841dee6f">   43</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classtexture.html#a5b9a995078ce974944cf7f45841dee6f">texture::drawRectangle</a>(SDL_Rect dst, SDL_Color color, <span class="keywordtype">bool</span> fill){</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    SDL_SetRenderDrawColor(this-&gt;renner, color.r, color.g, color.b, SDL_ALPHA_OPAQUE);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span>(fill){SDL_RenderFillRect(this-&gt;renner, &amp;dst);}<span class="keywordflow">else</span>{SDL_RenderDrawRect(this-&gt;renner, &amp;dst);}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classtexture.html#a31c09dabed135512ba9981c51f8aeb8f">   48</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classtexture.html#a31c09dabed135512ba9981c51f8aeb8f">texture::writeText</a>(std::string message, SDL_Rect dst, <span class="keywordtype">int</span> fontSize, SDL_Color color){</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    TTF_Font *font = TTF_OpenFont(<span class="stringliteral">&quot;./resources/Ubuntu Mono derivative Powerline Bold.ttf&quot;</span>, fontSize);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span>(font == <span class="keyword">nullptr</span>){std::cout &lt;&lt; TTF_GetError() &lt;&lt; std::endl; <span class="keywordflow">return</span>;}</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    SDL_Surface *surf = TTF_RenderText_Blended(font, message.c_str(), color);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span>(surf == <span class="keyword">nullptr</span>){std::cout &lt;&lt; <span class="stringliteral">&quot;surfaceeror&quot;</span> &lt;&lt; std::endl; TTF_CloseFont(font); <span class="keywordflow">return</span>;}</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    SDL_Texture *text = SDL_CreateTextureFromSurface(this-&gt;renner, surf);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span>(text == <span class="keyword">nullptr</span>){std::cout &lt;&lt; <span class="stringliteral">&quot;textureerror&quot;</span> &lt;&lt; std::endl;}</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    SDL_FreeSurface(surf);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    TTF_CloseFont(font);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    SDL_QueryTexture(text, NULL, NULL, &amp;dst.w, &amp;dst.h);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    SDL_RenderCopy(this-&gt;renner, text, NULL, &amp;dst);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="classtexture_html_a5b9a995078ce974944cf7f45841dee6f"><div class="ttname"><a href="classtexture.html#a5b9a995078ce974944cf7f45841dee6f">texture::drawRectangle</a></div><div class="ttdeci">void drawRectangle(SDL_Rect dst, SDL_Color color, bool fill)</div><div class="ttdef"><b>Definition:</b> <a href="texture_8cpp_source.html#l00043">texture.cpp:43</a></div></div>
<div class="ttc" id="classtexture_html_aff3c0a060981e8606ac39b761de56478"><div class="ttname"><a href="classtexture.html#aff3c0a060981e8606ac39b761de56478">texture::changeFilePath</a></div><div class="ttdeci">void changeFilePath(uint8_t kindOfTexture, std::string newPath)</div><div class="ttdoc">with this you can change the path to the texture file you wanna load</div><div class="ttdef"><b>Definition:</b> <a href="texture_8cpp_source.html#l00035">texture.cpp:35</a></div></div>
<div class="ttc" id="debug_8hpp_html_a8bd145c764f3c7360ec11574144cddc9"><div class="ttname"><a href="debug_8hpp.html#a8bd145c764f3c7360ec11574144cddc9">_T</a></div><div class="ttdeci">#define _T(s)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00174">debug.hpp:174</a></div></div>
<div class="ttc" id="classtexture_html_a31c09dabed135512ba9981c51f8aeb8f"><div class="ttname"><a href="classtexture.html#a31c09dabed135512ba9981c51f8aeb8f">texture::writeText</a></div><div class="ttdeci">void writeText(std::string message, SDL_Rect dst, int fontSize, SDL_Color color)</div><div class="ttdef"><b>Definition:</b> <a href="texture_8cpp_source.html#l00048">texture.cpp:48</a></div></div>
<div class="ttc" id="debug_8hpp_html_a5852b5e64b4795d4994b9c2c8bb68874"><div class="ttname"><a href="debug_8hpp.html#a5852b5e64b4795d4994b9c2c8bb68874">DEB_MSG_3</a></div><div class="ttdeci">#define DEB_MSG_3(str)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8hpp_source.html#l00280">debug.hpp:280</a></div></div>
<div class="ttc" id="classtexture_html_ad5a0bbb1b219b176d7f7ba0cc4889479"><div class="ttname"><a href="classtexture.html#ad5a0bbb1b219b176d7f7ba0cc4889479">texture::renderTexture</a></div><div class="ttdeci">void renderTexture(int textureID, uint8_t kindOfTexture, SDL_Rect dst, int hight, int width)</div><div class="ttdoc">this will render the given texture at the position of the given rectangle</div><div class="ttdef"><b>Definition:</b> <a href="texture_8cpp_source.html#l00013">texture.cpp:13</a></div></div>
<div class="ttc" id="classtexture_html_a67c03ae3cb8184199ab3127ce0f610c0"><div class="ttname"><a href="classtexture.html#a67c03ae3cb8184199ab3127ce0f610c0">texture::texture</a></div><div class="ttdeci">texture()</div><div class="ttdoc">that is an empty constructor. if you construct it this way dont use it</div><div class="ttdef"><b>Definition:</b> <a href="texture_8hpp_source.html#l00026">texture.hpp:26</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
